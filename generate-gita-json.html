<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Generate gita-hi.json</title>
</head>
<body>

<h2>Generating gita-hi.json…</h2>
<p>Open DevTools → Console</p>

<script>
(async function () {
  try {
    // LOAD SOURCE DATASET
    const res = await fetch("./dataset_hindi.json");
    const data = await res.json();

    const output = [];
    let count = 0;

    // ITERATE CHAPTERS
    for (const chapterKey in data.chapters) {
      const chapter = data.chapters[chapterKey];
      const chapterNum = parseInt(chapterKey, 10);

      // EACH VERSE NUMBER
      for (const verseNum of chapter.verse_numbers) {
        const verseData =
          data.verses?.[chapterKey]?.[verseNum] ||
          data.verse_data?.[chapterKey]?.[verseNum] ||
          {};

        const shloka =
          verseData.text ||
          verseData.shloka ||
          "";

        const meaning =
          verseData.verse_meaning_hindi ||
          verseData.verse_meaning ||
          verseData.meaning?.hindi ||
          verseData.translations?.hindi ||
          "";

        if (shloka.trim()) {
          output.push({
            chapter: chapterNum,
            verse: verseNum,
            shloka: shloka.trim(),
            meaning: meaning.trim()
          });
          count++;
        }
      }
    }

    console.log("TOTAL VERSES:", count);
    console.log(
      JSON.stringify(output, null, 2)
    );

    document.body.innerHTML +=
      "<h3>Done. Check Console.</h3>";

  } catch (e) {
    console.error("Generation failed:", e);
  }
})();
</script>

</body>
</html>
