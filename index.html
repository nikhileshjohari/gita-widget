<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8" />
  <title>श्रीमद्भगवद्गीता – आज का श्लोक</title>

  <style>
    html, body {
      height: 100%;
      margin: 0;
      font-family: "Mangal", "Noto Serif Devanagari", serif;
      background: linear-gradient(
        135deg,
        #fdecef 0%,
        #f8e6eb 35%,
        #ffffff 100%
      );
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .card {
      width: 100%;
      max-width: 520px;
      background: #ffffff;
      border-radius: 18px;
      padding: 26px 24px 22px;
      box-shadow: 0 10px 28px rgba(0,0,0,0.12);
    }

    .shloka {
      font-size: 20px;
      font-weight: 600;
      text-align: center;
      line-height: 1.7;
      margin-bottom: 18px;
      color: #2a2a2a;
      white-space: pre-line;
    }

    .meaning {
      font-size: 16px;
      line-height: 1.65;
      color: #444;
      margin-bottom: 14px;
      text-align: left;
    }

    .ref {
      font-size: 13px;
      color: #777;
      text-align: right;
    }
  </style>
</head>

<body>
  <div class="card">
    <div class="shloka" id="shloka">लोड हो रहा है…</div>
    <div class="meaning" id="meaning"></div>
    <div class="ref" id="ref"></div>
  </div>

  <script>
    (async function () {
      try {
        const response = await fetch("gita-hi.json");
        const allVerses = await response.json();

        const rejectedStarts = [
          "संजय बोले",
          "धृतराष्ट्र बोले",
          "अर्जुन बोले"
        ];

        const krishnaVerses = allVerses.filter(v => {
          if (v.chapter < 2) return false;
          if (!v.meaning) return false;

          return !rejectedStarts.some(prefix =>
            v.meaning.trim().startsWith(prefix)
          );
        });

        if (!krishnaVerses.length) {
          throw new Error("No Krishna verses found");
        }

        const dayIndex = Math.floor(
          new Date().setHours(0,0,0,0) / 86400000
        );

        const verse = krishnaVerses[
          dayIndex % krishnaVerses.length
        ];

        document.getElementById("shloka").innerText =
          verse.shloka
            .replace(/^श्रीभगवानुवाच[\s|।-]*/g, "")
            .trim();

        document.getElementById("meaning").innerText =
          verse.meaning
            .replace(/^श्री भगवान बोले[\s–-]*/g, "")
            .trim();

        document.getElementById("ref").innerText =
          `— अध्याय ${verse.chapter}, श्लोक ${verse.verse}`;

      } catch (e) {
        document.getElementById("shloka").innerText =
          "श्लोक लोड नहीं हो सका";
        console.error(e);
      }
    })();
  </script>
</body>
</html>
